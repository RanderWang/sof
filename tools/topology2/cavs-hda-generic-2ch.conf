#
# HDA topology 2ch
#
#
# PCM 0 -> buffer1.0 -> volume1.0 -> buffer1.1 -> HDA0.playback
# PCM 0 <- buffer2.0 <- volume2.0 <- buffer2.1 <- eqiir2.0 <- buffer2.1 <- HDA1.capture
# PCM 1 -> buffer3.0 -> volume3.0 -> buffer3.1 -> HDA2.playback
# PCM 1 <- buffer4.0 <- volume4.0 <- buffer4.1 <- eqiir4.0 <- buffer4.1 <- HDA3.capture
# PCM 3 -> buffer7.0 -> volume7.0 -> buffer7.1 -> HDA4.playback
# PCM 4 -> buffer8.0 -> volume8.0 -> buffer8.1 -> HDA5.playback
# PCM 5 -> buffer9.0 -> volume9.0 -> buffer9.1 -> HDA6.playback
# PCM 6 <- buffer10.0 <- volume10.0 <- buffer10.1 -> DMIC 0
# PCM 7 <- buffer11.0 <- volume11.0 <- buffer11.1 -> DMIC 1
#

<include/common/tokens.conf>
<include/platform/intel/bxt.conf>
<include/pipelines/cavs/pipeline-passthrough-playback.conf>
<include/pipelines/cavs/pipeline-passthrough-capture.conf>
<include/common/connection.conf>
<include/common/endpoint.conf>
<include/components/dai.conf>
<include/dais/hda.conf>
<include/dais/dmic.conf>
<include/dais/dmic_blob.conf>

#
# Pipeline definitions
#

# Pipeline ID:1 PCM ID: 0

# Pipeline ID:7 PCM ID: 3
Object.pipeline-passthrough-playback."7.4" {
	pcm_name	"HDMI1"
	format		"s24le"
	channels	2
	rate		48000
}

# Pipeline ID:8 PCM ID: 4
Object.pipeline-passthrough-playback."8.5" {
	pcm_name	"HDMI2"
	format		"s24le"
	channels	2
	rate		48000
}

# Pipeline ID:9 PCM ID: 5
Object.pipeline-passthrough-playback."9.6" {
	pcm_name	"HDMI3"
	format		"s24le"
	channels	2
	rate		48000
}

# Pipeline ID:10 PCM ID: 6
Object.pipeline-passthrough-capture."10.7" {
	pcm_name	"DMIC"
	format		"s32le"
	channels	2
	rate		48000
}

# Pipeline ID:11 PCM ID: 7
Object.pipeline-passthrough-capture."11.8" {
	pcm_name	"DMIC16k"
	format		"s16le"
	channels	4
	rate		16000
}

#
# List of all DAIs
#
# HDA Playback DAI Index: 0, Capture DAI Index: 1, Direction: duplex

# HDA Playback DAI Index: 4,  Direction: playback
# Capture DAI index is unused
Object.HDA."4.playback" {
	dai_name		"iDisp1"
	id 			1
	format			"s32le"
	default_hw_config	1
	hw_config."1" {}

	#include DAI components
        <include/dais/pipe-copier-playback.conf>
}

# HDA Playback DAI Index: 5,  Direction: playback
# Capture DAI index is unused
Object.HDA."5.playback" {
	dai_name		"iDisp2"
	id 			2
	format			"s32le"
	default_hw_config	2
	hw_config."2" {}

	#include DAI components
        <include/dais/pipe-copier-playback.conf>
}

# HDA Playback DAI Index: 6,  Direction: playback
# Capture DAI index is unused
Object.HDA."6.playback" {
	dai_name		"iDisp3"
	id 			3
	format			"s32le"
	default_hw_config	3
	hw_config."3" {}

	#include DAI components
        <include/dais/pipe-copier-playback.conf>
}

# DMIC DAI Index: 0,  Direction: capture
Object.DMIC."7.capture" {
	dai_name		"dmic01"
	id 			6
	format			"s32le"
	blob_data	"38400_KHZ_48K_2CH"
	default_hw_config	6
	hw_config."6" {}
	driver_version		1
	clk_min		500000
	clk_max		4800000
	duty_min		40
	duty_max		60
	sample_rate		48000
	fifo_word_length	32
	unmute_ramp_time_ms	200
	num_pdm_active		1

	# PDM controller config
	pdm_config."0" {}

	#include DAI components
        <include/dais/pipe-copier-capture.conf>
}

# DMIC DAI Index: 1,  Direction: capture
Object.DMIC."8.capture" {
	dai_name		"dmic16k"
	id 			7
	format			"s32le"
	blob_data	"38400_KHZ_48K_2CH"
	default_hw_config	7
	hw_config."7" {}
	driver_version		1
	clk_min		500000
	clk_max		4800000
	duty_min		40
	duty_max		60
	sample_rate		16000
	fifo_word_length	32
	unmute_ramp_time_ms	400
	num_pdm_active		1

	# PDM controller config
	pdm_config."0" {}

	#include DAI components
        <include/dais/pipe-copier-capture.conf>
}

#
# List of all endpoint connections
#
# Connect: Pipeline 1 -> HDA 0 DAI_IN


# Connect: Pipeline 7 -> HDA 4 DAI_IN
Object.connection."endpoint.5.4" {
	source "endpoint.sink.pipeline.7.0"
	sink "endpoint.source.HDA.4.0"
}

# Connect: Pipeline 8 -> HDA 5 DAI_IN
Object.connection."endpoint.6.5" {
	source "endpoint.sink.pipeline.8.0"
	sink "endpoint.source.HDA.5.0"
}

# Connect: Pipeline 9 -> HDA 6 DAI_IN
Object.connection."endpoint.7.6" {
	source "endpoint.sink.pipeline.9.0"
	sink "endpoint.source.HDA.6.0"
}

# Connect: DMIC 0 DAI_OUT -> Pipeline 10
Object.connection."endpoint.8.7" {
	sink "endpoint.source.pipeline.10.0"
	source "endpoint.sink.DMIC.7.0"
}

# Connect: DMIC 1 DAI_OUT -> Pipeline 11
Object.connection."endpoint.9.8" {
	sink "endpoint.source.pipeline.11.0"
	source "endpoint.sink.DMIC.8.0"
}

#add abi
<include/common/data.conf>
<include/common/manifest.conf>
<abi-generated.conf>

# Virtual widgets for legacy machine driver compatibility
<include/components/virtual_widget.conf>
Object.virtual_widget."iDisp3 Tx" {
	widget_type	"out_drv"
}
Object.virtual_widget."iDisp2 Tx" {
	widget_type	"out_drv"
}
Object.virtual_widget."iDisp1 Tx" {
	widget_type	"out_drv"
}
Object.virtual_widget."Analog CPU Playback" {
	widget_type	"out_drv"
}
Object.virtual_widget."Digital CPU Playback" {
	widget_type	"out_drv"
}
Object.virtual_widget."Alt Analog CPU Playback" {
	widget_type	"out_drv"
}
Object.virtual_widget."Analog CPU Capture" {
	widget_type	"input"
}
Object.virtual_widget."Digital CPU Capture" {
	widget_type	"input"
}
Object.virtual_widget."Alt Analog CPU Capture" {
	widget_type	"input"
}
Object.virtual_widget."codec0_in" {
	widget_type	"input"
}
Object.virtual_widget."codec1_in" {
	widget_type	"input"
}
Object.virtual_widget."codec0_out" {
	widget_type	"input"
}
Object.virtual_widget."codec1_out" {
	widget_type	"input"
}
Object.virtual_widget."codec2_in" {
	widget_type	"input"
}
Object.virtual_widget."codec2_out" {
	widget_type	"input"
}
Object.virtual_widget."iDisp1_out" {
	widget_type	"input"
}
Object.virtual_widget."iDisp2_out" {
	widget_type	"input"
}
Object.virtual_widget."iDisp3_out" {
	widget_type	"input"
}
